# FindNetCDF.cmake module

IF (UNIX)
	FIND_PATH(NETCDF_INCLUDE_DIR netcdf.h /usr/include /usr/local/include /usr/local/bic/include)
	FIND_LIBRARY(NETCDF_LIBRARY NAMES netcdf PATHS /usr/lib /usr/local/lib /usr/local/bic/lib)
ELSEIF (WIN32)
	IF (DEFINED ENV{NETCDF_ROOT})
		file(TO_CMAKE_PATH $ENV{NETCDF_ROOT} My_NETCDF_ROOT)
		set(My_NETCDF_INCLUDE_DIR "${My_NETCDF_ROOT}/include")
		FIND_PATH(NETCDF_INCLUDE_DIRECTORY netcdf.h PATHS "${My_NETCDF_INCLUDE_DIR}")
		IF (NOT NETCDF_INCLUDE_DIRECTORY)
			MESSAGE("Cannot find include\\netcdf.h - did you set env var NETCDF_ROOT?")
			MESSAGE("${My_NETCDF_INCLUDE_DIR}")
		ENDIF (NOT NETCDF_INCLUDE_DIRECTORY)
			
		set(My_NETCDF_LIB_DIR "${My_NETCDF_ROOT}/lib")
		#FIND_LIBRARY(NETCDF_LIBRARY netcdf.lib PATHS "${My_NETCDF_ROOT}/lib" NO_DEFAULT_PATH)
		FIND_LIBRARY(NETCDF_LIBRARY netcdf.lib PATHS "${My_NETCDF_LIB_DIR}" NO_DEFAULT_PATH)
		IF (NOT NETCDF_LIBRARY)
			MESSAGE("Cannot find lib/netcdf.lib - did you set env var NETCDF_ROOT?")
			MESSAGE("USING ${My_NETCDF_LIB_DIR}")
			MESSAGE("includes in ${NETCDF_INCLUDE_DIRECTORY}")
		ENDIF (NOT NETCDF_LIBRARY)
	ELSE (DEFINED ENV{NETCDF_ROOT})
		MESSAGE(FATAL_ERROR "Could not find netcdf include dir. Check env var NETCDF_ROOT (should contain include/netcdf.h)")
	ENDIF (DEFINED ENV{NETCDF_ROOT})
ENDIF (UNIX)

IF (NETCDF_INCLUDE_DIRECTORY AND NETCDF_LIBRARY)
   SET(NETCDF_FOUND TRUE)
ENDIF (NETCDF_INCLUDE_DIRECTORY AND NETCDF_LIBRARY)


IF (NETCDF_FOUND)
   IF (NOT NETCDF_FIND_QUIETLY)
      MESSAGE(STATUS "Found NetCDF headers: ${NETCDF_INCLUDE_DIRECTORY}")
      MESSAGE(STATUS "Found NetCDF library: ${NETCDF_LIBRARY}")
   ENDIF (NOT NETCDF_FIND_QUIETLY)
ELSE (NETCDF_FOUND)
   IF (NETCDF_FIND_REQUIRED)
      MESSAGE(FATAL_ERROR "Cound not find NetCDF")
   ENDIF (NETCDF_FIND_REQUIRED)
ENDIF (NETCDF_FOUND)

